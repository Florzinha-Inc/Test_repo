name: Auto Comment
on: [issues]
jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - uses: wow-actions/auto-comment@v1
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          issuesOpenedReactions: 'hooray'
          issuesOpenedComment: |
            ![](http://images.github.media/EloquaImages/clients/GitHubInc/%7B64693387-8abe-494c-8af0-7bde046a64d1%7D_hubot_512.png)
            
            ðŸ‘‹ @{{ author }}, this is the MOPs bot. Thank you for raising an issue!
            I'll go ahead and assign it to one of our MOPs team members and they will triage this issue and get back to you as soon as possible.
            But first let's keep working together to ensure that you have given us as much context as possible prior to their Triage.
            
            Give me a sec to finish the assignment and labeling of this issue and I will get back to you with next steps.

  test:
    needs: run
    runs-on: ubuntu-latest
    steps:
      - uses: Naturalclar/issue-action@v2.0.2
        with:
          title-or-body: "both"
          parameters: '[ {"keywords": ["I am based in AMER", "Task: Webinar email(s): AMER"], "labels": ["AMER", "grey"], "assignees": ["BrunoChester"]}, {"keywords": ["I am based in EMEA"], "labels": ["EMEA", "grey"], "assignees": ["jason-araujo"]}, {"keywords": ["I am based in APAC"], "labels": ["APAC", "grey"], "assignees": ["jason-araujo"]}, {"keywords": ["Description of Enhancement Request"], "labels": ["grey"], "assignees": ["mike421453"]}, {"keywords": ["Ask me anything"], "labels": ["Triage", "Question"], "assignees": ["mike421453"]}]'
          github-token: "${{ secrets.GITHUB_TOKEN }}"
  
  nurture-comment:
    needs: test
    if: github.event.label.name == 'Nurture'
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Add comment
        uses: peter-evans/create-or-update-comment@a35cf36e5301d70b76f316e867e7788a55a31dae
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            ![](http://images.github.media/EloquaImages/clients/GitHubInc/%7B64693387-8abe-494c-8af0-7bde046a64d1%7D_hubot_512.png)
            
            @${{ github.event.issue.user.login }}, I've successfully labelled and assigned the issue. Now let's continue with next steps :rocket:
            
            :sparkle: Nurture campaigns are always fun!
            
            Please go ahead and type `/create-email` on the comment box below so that you can start adding the assets to this issue.
            Feel free to use the `/create-email` as many times as needed until you have added all email information needed.

  Webinar-comment:
    needs: test
    if: github.event.label.name == 'Webinar'
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Add comment
        uses: peter-evans/create-or-update-comment@a35cf36e5301d70b76f316e867e7788a55a31dae
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            ![](http://images.github.media/EloquaImages/clients/GitHubInc/%7B64693387-8abe-494c-8af0-7bde046a64d1%7D_hubot_512.png)
            
            @${{ github.event.issue.user.login }}, I've successfully labelled and assigned the issue. Now let's continue with next steps :rocket:
            
            For all Webinars we usually follow the following structure:
            **1 -** Subscription Landing Page -> When ready please run `/Webinar landing page` to start building this asset
            **2 -** Emails (invite, follow-up, thank-you) -> When ready please run `/Email Builder` as many times as needed to build all necessary emails 
            **3 -** Thank you page -> When ready please run `/Webinar thank you page` to start building this asset
            **4 -** Lead upload -> When ready please run `/lead-upload` to give us the necessary information
            
            **Remember:** One at a time all `/commands` listed above need to be typed on a comment box like the one below :point_down:
          
  single-email-comment:
    needs: test
    if: github.event.label.name == 'Single-Email'
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Add comment
        uses: peter-evans/create-or-update-comment@a35cf36e5301d70b76f316e867e7788a55a31dae
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            ![](http://images.github.media/EloquaImages/clients/GitHubInc/%7B64693387-8abe-494c-8af0-7bde046a64d1%7D_hubot_512.png)
            
            @${{ github.event.issue.user.login }}, I've successfully labelled and assigned the issue. Now let's continue with next steps :rocket:
            
            Single Emails are straight forward and I believe we already have all that is needed to work on it for you. 
            
            In case of any additional questions someone from the team will get in touch.
            
            Thank you! 
  
  Lead-Upload-comment:
    needs: test
    if: github.event.label.name == 'Lead Upload'
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Add comment
        uses: peter-evans/create-or-update-comment@a35cf36e5301d70b76f316e867e7788a55a31dae
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            ![](http://images.github.media/EloquaImages/clients/GitHubInc/%7B64693387-8abe-494c-8af0-7bde046a64d1%7D_hubot_512.png)
            
            @${{ github.event.issue.user.login }}, I've successfully labelled and assigned the issue. Now let's continue with next steps :rocket:
            
            If these are leads from a Webinar that we worked on together, we would ask you to go to that issue and follow the instructions there. 
            
            If this Lead Upload doesn't come from a Webinar that we worked on together you are in the right place and we will pick it up from here :smile:
            
            Thank you!
            
  Enhancement-Report-comment:
    needs: test
    if: github.event.label.name == 'help-wanted'
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Add comment
        uses: peter-evans/create-or-update-comment@a35cf36e5301d70b76f316e867e7788a55a31dae
        with:
          issue-number: ${{ github.event.issue.number }}
          body: |
            ![](http://images.github.media/EloquaImages/clients/GitHubInc/%7B64693387-8abe-494c-8af0-7bde046a64d1%7D_hubot_512.png)
            
            @${{ github.event.issue.user.login }}, we have all that is needed for initial triage and will get back to you soon. 
            
            Thank you!      
  
  New-issue-needed:
    needs: test
    if: github.event.label.name == 'needs-email'
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Create team sync issue
        uses: imjohnbo/issue-bot@3daae12aa54d38685d7ff8459fc8a2aee8cea98b
        with:
          assignees: ${{ github.event.issue.assignee.login }}
          labels: "weekly sync, docs-team"
          title: "Team sync"
          body: |
            ### Agenda
            
            @${{ github.event.issue.user.login }}

            - [ ] Start the recording
            - [ ] Check-ins
            - [ ] Discussion points
            - [ ] Post the recording
                    
            ### Discussion Points
            Add things to discuss below

            - [Work this week](https://github.com/orgs/github/projects/3)
          pinned: false
          close-previous: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
